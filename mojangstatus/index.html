<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Load Roboto-->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" rel="stylesheet" type="text/css" />
    <!-- load MUI -->
    <link href="https://cdn.muicss.com/mui-0.4.7/css/mui.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.muicss.com/mui-0.4.7/js/mui.min.js"></script>
    <script src='https://glitchedpixelsmc.github.io/mojangstatus/MinecraftColorCodes.3.5.min.js'></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
    <!-- custom font css -->
    <style>
      body {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial;
        background: #eee;
        height: 100%;
      }
    </style>
    <script>

function active() {
  if (document.getElementById("rawAddress").value.length > 0) {document.getElementById("submitButton").removeAttribute("disabled");}
else {document.getElementById("submitButton").setAttribute("disabled", "");}}
function Get(yourUrl){
var Httpreq = new XMLHttpRequest(); // a new request
Httpreq.open("GET",yourUrl,false);
Httpreq.send(null);
return Httpreq.responseText;

}
function pullData() {
var rawAddress = document.getElementById("rawAddress").value;
if ( rawAddress.indexOf(":") > -1 ) {
  var n = rawAddress.lastIndexOf(':');
  var port = rawAddress.substring(n + 1);
  var address = rawAddress.slice(0, rawAddress.indexOf(":"));
  var url = 'https://mcapi.us/server/status?ip=' + rawAddress + '&port=' + port;
} else {
  var url = 'https://mcapi.us/server/status?ip=' + rawAddress;
}
  console.log(JSON.parse(Get(url)));
  var errorCheck = JSON.parse(Get(url)).error;
  console.log(errorCheck);
  if (errorCheck == "") {
console.log("Json Ok")
$("#errorBox").html("");
  } if (errorCheck != "") {
    document.getElementById('errorBox').innerHTML = "<h1>" + errorCheck + "<h1>";
  }
  return false;
}
</script>
  </head>
  <body>
    <div class="mui-appbar">

</div>
    <div class="mui-container">
      <br>
  <div class="mui-panel">
    <form>
      <legend></legend>
    <div class="mui-textfield">
      <input type="text" placeholder="Server Address" id='rawAddress' onkeydown='active()' onkeyup='active()' onkeypress="active()">
    </div>

    <button type="button" class="mui-btn mui-btn--raised" id='submitButton' onclick='pullData()' disabled>Submit</button>

  </form>
</div>
<center><div id='errorBox'></div></center>
  </div>
  </body>
</html>
